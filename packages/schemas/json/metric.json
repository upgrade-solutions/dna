{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://dna.codes/schemas/metric.json",
  "title": "Metric Schema",
  "description": "Defines a metric â€” a quantifiable performance indicator that measures progress toward outcomes.",
  "examples": [
    {
      "id": "borrower-satisfaction-score",
      "name": "Borrower Satisfaction Score",
      "key": "borrowerSatisfactionScore",
      "type": "Metric",
      "description": "Average customer satisfaction score based on post-loan surveys",
      "category": "customer",
      "dataType": "number",
      "unit": "score",
      "scale": "1-10",
      "currentValue": 7.2,
      "targetValue": 8.6,
      "targetImprovement": "20%",
      "measurementFrequency": "monthly",
      "dataSource": "customer-survey-system",
      "relatedOutcomes": ["increased-mrr-outcome"],
      "trendDirection": "increasing"
    },
    {
      "id": "loan-approval-rate",
      "name": "Loan Approval Rate",
      "key": "loanApprovalRate",
      "type": "Metric",
      "description": "Percentage of loan applications that are approved",
      "category": "operational",
      "dataType": "percentage",
      "unit": "percent",
      "currentValue": 68,
      "targetValue": 75,
      "measurementFrequency": "weekly",
      "dataSource": "loan-origination-system"
    }
  ],
  "allOf": [
    { "$ref": "https://dna.codes/schemas/base.json" },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "Metric"
        },
        "category": {
          "type": "string",
          "enum": ["financial", "customer", "operational", "quality", "efficiency", "compliance"],
          "description": "Category of the metric"
        },
        "dataType": {
          "type": "string",
          "enum": ["number", "percentage", "currency", "duration", "count"],
          "description": "Type of data this metric represents"
        },
        "unit": {
          "type": "string",
          "description": "Unit of measurement (e.g., USD, percent, minutes, count)"
        },
        "scale": {
          "type": "string",
          "description": "Scale or range for the metric (e.g., '1-10', '0-100%')"
        },
        "currentValue": {
          "type": "number",
          "description": "Current measured value"
        },
        "targetValue": {
          "type": "number",
          "description": "Target value to achieve"
        },
        "targetImprovement": {
          "type": "string",
          "description": "Expected improvement (e.g., '20%', '+15 points')"
        },
        "measurementFrequency": {
          "type": "string",
          "enum": ["real-time", "hourly", "daily", "weekly", "monthly", "quarterly"],
          "description": "How frequently this metric is measured"
        },
        "dataSource": {
          "type": "string",
          "description": "Source system or process that provides this metric data"
        },
        "relatedOutcomes": {
          "type": "array",
          "description": "Outcomes this metric contributes to measuring",
          "items": {
            "type": "string"
          }
        },
        "trendDirection": {
          "type": "string",
          "enum": ["increasing", "decreasing", "stable", "volatile"],
          "description": "Current trend direction of the metric"
        }
      },
      "required": ["category", "dataType", "unit", "measurementFrequency"]
    }
  ]
}